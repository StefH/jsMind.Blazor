var MindMap=MindMap||{};const instances={};MindMap.setDocumentTitle=function(n){document.title=n};MindMap.show=function(n,t,i,r){const f={meta:{name:t,author:"Stef Heyenrath",version:"1.0"},format:r.format,data:r.data},e={container:t,editable:i.editable,theme:i.theme},u=window.jsMind.show(e,f);setReadOnly(u,i.readOnly);u.multiSelect=i.multiSelect;const o=async function(i,r){try{switch(i){case 2:await n.invokeMethodAsync("OnResizeCallback",{evt:"resize",containerId:t});break;case 3:await n.invokeMethodAsync("OnEditCallback",r);break;case 4:await n.invokeMethodAsync("OnSelectCallback",r)}}catch(u){console.warn(u)}};if(i.multiSelect){MindMap.clearSelect(t);const i=function(t){if(u.options.default_event_handle.enable_mousedown_handle){t.preventDefault();const r=t.target||event.srcElement,i=this.view.get_binded_nodeid(r);if(i&&r.tagName.toLowerCase()==="jmnode"){const f=u.get_node(i);let t;const r=u.selectedNodes.indexOf(i);r>-1?(u.selectedNodes.splice(r,1),updateSelectedClass(f,!1),t=null):(u.selectedNodes.push(i),t=i);u.selectedNodes.forEach(n=>{const t=u.get_node(n);updateSelectedClass(t,!0)});n.invokeMethodAsync("OnMultiSelectCallback",{id:t,ids:u.selectedNodes})}}};u.view.add_event(u,"mousedown",i)}u.add_event_listener(o);instances[t]=u;n.invokeMethodAsync("OnShowCallback",{evt:"done",containerId:t})};MindMap.destroy=function(n){instances[n]=null;delete instances[n]};MindMap.addNode=function(n,t,i,r,u){instances[n]&&instances[n].add_node(t,i,r,u)};MindMap.updateNode=function(n,t,i){instances[n]&&instances[n].update_node(t,i)};MindMap.removeNode=function(n,t){instances[n]&&instances[n].remove_node(t)};MindMap.expandNode=function(n,t){instances[n]&&instances[n].expand_node(t)};MindMap.collapseNode=function(n,t){instances[n]&&instances[n].collapse_node(t)};MindMap.expand=function(n){instances[n]&&instances[n].expand_all()};MindMap.expandToDepth=function(n,t){instances[n]&&instances[n].expand_to_depth(t)};MindMap.collapse=function(n){instances[n]&&instances[n].collapse_all()};MindMap.selectNode=function(n,t){instances[n]&&instances[n].select_node(t)};MindMap.selectNodes=function(n,t){instances[n]&&instances[n].multiSelect&&(instances[n].selectedNodes=[],t.forEach(t=>{const i=instances[n].get_node(t.id);updateSelectedClass(i,!0);instances[n].selectedNodes.push(t.id)}))};MindMap.getNode=function(n,t){return instances[n]?mapNode(instances[n].get_node(t)):undefined};MindMap.clearSelect=function(n){const t=instances[n];t&&(t.multiSelect?(t.selectedNodes&&t.selectedNodes.forEach(n=>{updateSelectedClass(t.get_node(n),!1)}),t.selectedNodes=[]):t.select_clear())};MindMap.setTheme=function(n,t){instances[n]&&instances[n].set_theme(t)};MindMap.disableEdit=function(n){instances[n]&&instances[n].disable_edit()};MindMap.enableEdit=function(n){instances[n]&&instances[n].enable_edit()};MindMap.isEditable=function(n){return instances[n]?instances[n].get_editable():!1};MindMap.setReadOnly=function(n,t){return instances[n]?setReadOnly(instances[n],t):!1};updateSelectedClass=function(n,t){t&&!/\s*selected\b/i.test(n._data.view.element.className)?n._data.view.element.className+=" selected":t||(n._data.view.element.className=n._data.view.element.className.replace(/\s*selected\b/ig,""))};mapNode=function(n){return{id:n.id,topic:n.topic,expanded:n.expanded,direction:n.direction,data:n.data,parentId:n.parentId}};setReadOnly=function(n,t){n.options.default_event_handle={enable_mousedown_handle:!t,enable_click_handle:!t,enable_dblclick_handle:!t}};